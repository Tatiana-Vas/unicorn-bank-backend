# Screen Specification

## Screen name
**Wishlist & Requests (Child)**

---

## Scope
The screen is designed for the **child** and is used to:

- Manage a personal **wishlist**
- Mark wishes as **active** or **fulfilled**
- Create requests to the parent based on **active wishes**:
  - Cash withdrawal
  - Purchase request
- Track the **status of submitted requests**

The screen does **not** allow the child to spend money directly.  
All financial actions are created as **requests** and require **parent approval**.

---

## Actors
- **Primary actor:** Child  
- **Secondary actor:** Parent (approval, outside of this screen)

---

## Preconditions
- Child is authenticated
- Child has:
  - Spending account
  - (Optional) one or more Savings accounts
- Wishlist may be empty or contain one or more items

---

## Entry points
1. Child Home â†’ **Wishlist**
2. Child Profile â†’ **Wishlist**
3. Bottom navigation â†’ **Wishlist**

---

## Screen structure

### 1. Wishlist summary block
Displayed:
- Wishlist title
- **Total amount of active wishes**  
  (sum of wishes that are **not fulfilled**)

---

### 2. Wishlist items list

Each wishlist item has two possible states.

#### Active wish
Displayed:
- Checkbox (unchecked) â†’ indicates **active**
- Wish title (editable inline)
- Amount (editable inline)
- Action icons:
  - ðŸ’° **Cash**
  - ðŸ›’ **Purchase**
  - âœï¸ **Edit**
  - ðŸ—‘ **Delete**

Rules:
- Active wishes are included in the total amount
- Editing updates title and amount immediately
- Delete removes the wish permanently

---

#### Fulfilled wish
Displayed:
- Checkbox (checked) â†’ indicates **fulfilled**
- Wish title
- Amount
- **Remove (âœ•) icon**

Rules:
- Fulfilled wishes are **excluded** from total amount
- No action icons (cash / purchase / edit)
- Remove (âœ•) deletes the fulfilled wish from the list

---

### 3. Requests list
Displays **all requests created by the child**, regardless of origin, **except**:
- Task creation requests
- Task approval requests

Included request types:
- Cash withdrawal
- Purchase
- New deposit
- Any other financial requests initiated by the child

Requests may be created:
- From **Wishlist**
- From **My Accounts**
- From other child financial flows

---

For each request the following is displayed:
- **Request type**
  - Cash
  - Purchase
  - New deposit
- **Short description**
  - For Purchase â€” item name / description
  - For Cash / New deposit â€” optional or empty
- **Amount**
- **Status icon**
  - ðŸ†• New â€” pending parent approval
  - âœ… Approved
  - âŒ Rejected

**Color logic:**
- Cash / Purchase amounts â€” **red**
- New deposit amounts â€” **blue**

Tapping a request opens **request details** (read-only).

---

## Use cases

### UC-1: Create cash withdrawal from wishlist

**Description:**  
Child creates a cash request directly from a wishlist item.

**Flow:**
1. Child taps **Cash icon** on an active wish
2. Cash request screen opens
3. Amount is pre-filled from the wish
4. Child selects:
   - Source account (Spending)
   - Optional: request to close **any** Savings account
5. System validates:
   - Amount â‰¤ available balance of selected account
6. Child submits request

**Result:**
- `CashWithdrawalRequest` created
- Status: `pending_parent_approval`

---

### UC-2: Create purchase request from wishlist

**Description:**  
Child creates a purchase request from a wishlist item.

**Flow:**
1. Child taps **Purchase icon** on an active wish
2. Purchase request screen opens
3. Amount is pre-filled
4. Child enters:
   - Description / link (required)
   - Source account (Spending)
   - Optional: request to close **any** Savings account
5. System validates:
   - Amount â‰¤ available balance
6. Child submits request

**Result:**
- `PurchaseRequest` created
- Status: `pending_parent_approval`

---

### UC-3: Edit active wish

**Description:**  
Child updates an existing active wish.

**Flow:**
1. Child taps **Edit icon**
2. Title and/or amount become editable inline
3. Child saves changes

**Result:**
- Wishlist item updated
- Total amount recalculated

---

### UC-4: Mark wish as fulfilled

**Description:**  
Child marks a wish as completed.

**Flow:**
1. Child taps checkbox on an active wish
2. Wish becomes fulfilled

**Result:**
- Wish excluded from total
- Only Remove (âœ•) action remains

---

### UC-5: View request decision

**Description:**  
Child checks the result of a submitted request.

**Flow:**
1. Child taps a request in the list
2. Request details modal opens
3. Child sees:
   - Status icon
   - Parent comments (if provided)

---

## Validation rules
- All cash and purchase requests **always require parent approval**
- No limits or auto-approval logic
- If amount > available balance:
  - Cash / Purchase action is **disabled**
- Multiple pending requests from the same account are allowed

---

## Permissions

**Child can:**
- Create, edit, delete wishlist items
- Mark wishes as fulfilled
- Create cash and purchase requests
- View request statuses

**Child cannot:**
- Execute transactions
- Modify submitted requests
- Close deposits directly

---

## Notes
- Wishlist is a planning tool, not a reservation of funds
- Cash and Purchase requests share identical backend logic
- Purchase requests differ only by required description
- Fulfilled wishes are kept only for visual tracking
